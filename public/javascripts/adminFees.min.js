"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=exports.los,t=document.querySelector("main").dataset.urlPrefix,o=document.querySelector("#container--feeCategories");let s=exports.feeCategories;const a=e=>{const o=Number.parseInt(e.currentTarget.closest(".container--feeCategory").dataset.feeCategoryId,10),a=s.find(e=>e.feeCategoryId===o);let r;const l=e=>{e.preventDefault(),cityssm.postJSON(t+"/admin/doUpdateFeeCategory",e.currentTarget,e=>{e.success?(s=e.feeCategories,r(),n()):bulmaJS.alert({title:"Error Updating Fee Category",message:e.errorMessage,contextualColorName:"danger"})})};cityssm.openHtmlModal("adminFees-editFeeCategory",{onshow:e=>{e.querySelector("#feeCategoryEdit--feeCategoryId").value=a.feeCategoryId.toString(),e.querySelector("#feeCategoryEdit--feeCategory").value=a.feeCategory},onshown:(e,t)=>{bulmaJS.toggleHtmlClipped(),r=t,e.querySelector("form").addEventListener("submit",l)},onremoved:()=>{bulmaJS.toggleHtmlClipped()}})},r=t=>{const o=Number.parseInt(t.currentTarget.closest(".container--feeCategory").dataset.feeCategoryId,10);let a;const r=e=>{e.preventDefault()};cityssm.openHtmlModal("adminFees-addFee",{onshow:t=>{const a=t.querySelector("#feeAdd--feeCategoryId");for(const e of s){const t=document.createElement("option");t.value=e.feeCategoryId.toString(),t.textContent=e.feeCategory,e.feeCategoryId===o&&(t.selected=!0),a.append(t)}const r=t.querySelector("#feeAdd--occupancyTypeId");for(const e of exports.occupancyTypes){const t=document.createElement("option");t.value=e.occupancyTypeId.toString(),t.textContent=e.occupancyType,r.append(t)}const n=t.querySelector("#feeAdd--lotTypeId");for(const e of exports.lotTypes){const t=document.createElement("option");t.value=e.lotTypeId.toString(),t.textContent=e.lotType,n.append(t)}e.populateAliases(t)},onshown:(e,t)=>{bulmaJS.toggleHtmlClipped(),a=t,e.querySelector("form").addEventListener("submit",r)},onremoved:()=>{bulmaJS.toggleHtmlClipped()}})},n=()=>{if(0===s.length)return void(o.innerHTML='<div class="message is-warning"><p class="message-body">There are no available fees.</p></div>');o.innerHTML="";for(const e of s){const t=document.createElement("section");if(t.className="container--feeCategory",t.dataset.feeCategoryId=e.feeCategoryId.toString(),t.insertAdjacentHTML("beforeend",'<div class="level is-mobile"><div class="level-left"><div class="level-item"><h2 class="title is-4">'+cityssm.escapeHTML(e.feeCategory)+'</h2></div></div><div class="level-right"><div class="level-item"><button class="button is-small is-primary button--editFeeCategory" type="button"><span class="icon is-small"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span><span>Edit Category</span></button></div><div class="level-item"><button class="button is-small is-success button--addFee" type="button"><span class="icon is-small"><i class="fas fa-plus" aria-hidden="true"></i></span><span>Add Fee</span></button></div></div></div>'),0===e.fees.length)t.insertAdjacentHTML("beforeend",'<div class="message is-info"><p class="message-body">There are no fees in the "'+cityssm.escapeHTML(e.feeCategory)+'" category.</p></div>');else{const e=document.createElement("div");e.className="panel",t.append(e)}o.append(t)}const e=o.querySelectorAll(".button--editFeeCategory");for(const t of e)t.addEventListener("click",a);const t=o.querySelectorAll(".button--addFee");for(const e of t)e.addEventListener("click",r)};n(),document.querySelector("#button--addFeeCategory").addEventListener("click",()=>{let e;const o=o=>{o.preventDefault(),cityssm.postJSON(t+"/admin/doAddFeeCategory",o.currentTarget,t=>{t.success?(s=t.feeCategories,e(),n()):bulmaJS.alert({title:"Error Creating Fee Category",message:t.errorMessage,contextualColorName:"danger"})})};cityssm.openHtmlModal("adminFees-addFeeCategory",{onshown:(t,s)=>{bulmaJS.toggleHtmlClipped(),t.querySelector("#feeCategoryAdd--feeCategory").focus(),e=s,t.querySelector("form").addEventListener("submit",o)},onremoved:()=>{bulmaJS.toggleHtmlClipped()}})})})();