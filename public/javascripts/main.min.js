"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e,t,s,a;let o=!1;function n(){return o}function i(e){const t=e.currentTarget.closest(".field").querySelector("input, select");if(t.classList.remove("is-readonly"),"INPUT"===t.tagName)t.readOnly=!1,t.disabled=!1;else{const e=t.querySelectorAll("option");for(const t of e)t.disabled=!1}t.focus()}const c={type:"date",dateFormat:"yyyy-MM-dd",showFooter:!1,color:"info",displayMode:"dialog"};const r=Object.freeze({Map:cityssm.escapeHTML(exports.aliases.map),map:cityssm.escapeHTML(exports.aliases.map.toLowerCase()),Maps:cityssm.escapeHTML(exports.aliases.maps),maps:cityssm.escapeHTML(exports.aliases.maps.toLowerCase()),Lot:cityssm.escapeHTML(exports.aliases.lot),lot:cityssm.escapeHTML(exports.aliases.lot.toLowerCase()),Lots:cityssm.escapeHTML(exports.aliases.lots),lots:cityssm.escapeHTML(exports.aliases.lots.toLowerCase()),Occupancy:cityssm.escapeHTML(exports.aliases.occupancy),occupancy:cityssm.escapeHTML(exports.aliases.occupancy.toLowerCase()),Occupancies:cityssm.escapeHTML(exports.aliases.occupancies),occupancies:cityssm.escapeHTML(exports.aliases.occupancies.toLowerCase()),Occupant:cityssm.escapeHTML(exports.aliases.occupant),occupant:cityssm.escapeHTML(exports.aliases.occupant.toLowerCase()),Occupants:cityssm.escapeHTML(exports.aliases.occupants),occupants:cityssm.escapeHTML(exports.aliases.occupants.toLowerCase()),ExternalReceiptNumber:cityssm.escapeHTML(exports.aliases.externalReceiptNumber),externalReceiptNumber:cityssm.escapeHTML(exports.aliases.externalReceiptNumber.toLowerCase()),OccupancyStartDate:cityssm.escapeHTML(exports.aliases.occupancyStartDate),occupancyStartDate:cityssm.escapeHTML(exports.aliases.occupancyStartDate.toLowerCase()),WorkOrderOpenDate:cityssm.escapeHTML(exports.aliases.workOrderOpenDate),workOrderOpenDate:cityssm.escapeHTML(exports.aliases.workOrderOpenDate.toLowerCase()),WorkOrderCloseDate:cityssm.escapeHTML(exports.aliases.workOrderCloseDate),workOrderCloseDate:cityssm.escapeHTML(exports.aliases.workOrderCloseDate.toLowerCase())}),l=["red","green","orange","blue","pink","yellow","purple"],p=["bright","light","dark"];const u=null!==(t=null===(e=document.querySelector("main"))||void 0===e?void 0:e.dataset.urlPrefix)&&void 0!==t?t:"";function d(e,t,s,a){return u+"/"+e+(t?"/"+t.toString():"")+(t&&s?"/edit":"")+(a?"/?t="+Date.now().toString():"")}const y=exports.dynamicsGPIntegrationIsEnabled,m={urlPrefix:u,apiKey:null!==(a=null===(s=document.querySelector("main"))||void 0===s?void 0:s.dataset.apiKey)&&void 0!==a?a:"",dynamicsGPIntegrationIsEnabled:y,highlightMap:function(e,t,s){let a,o=t;for(;null===(a=e.querySelector("#"+o))&&o.includes("-");)o=o.slice(0,Math.max(0,o.lastIndexOf("-")));if(null!==a){a.style.fill="",a.classList.add("highlight","is-"+s);const e=a.querySelectorAll("path");for(const t of e)t.style.fill=""}},initializeUnlockFieldButtons:function(e){const t=e.querySelectorAll(".is-unlock-field-button");for(const e of t)e.addEventListener("click",i)},initializeDatePickers:function(e){var t,s,a;const o=e.querySelectorAll("input[type='date']");for(const n of o){const o=Object.assign({},c);n.required&&(o.showClearButton=!1),""!==n.min&&(o.minDate=cityssm.dateStringToDate(n.min)),""!==n.max&&(o.maxDate=cityssm.dateStringToDate(n.max));const i=exports.bulmaCalendar.attach(n,o)[0];i.on("save",()=>{n.value=i.value(),n.dispatchEvent(new Event("change"))}),i.on("show",()=>{var e;null===(e=document.querySelector("html"))||void 0===e||e.classList.add("is-clipped")}),i.on("hide",()=>{bulmaJS.toggleHtmlClipped()});const r=e.querySelector(`#${i._id}`),l=r.querySelectorAll(".datepicker-nav button.is-text");for(const e of l)e.classList.add(`is-${null!==(t=c.color)&&void 0!==t?t:""}`),e.classList.remove("is-text");const p=r.querySelector(".datetimepicker-clear-button");null!==p&&(n.required?p.remove():(p.dataset.tooltip="Clear",p.setAttribute("aria-label","Clear"),p.innerHTML='<span class="has-text-weight-bold" aria-hidden="true">&times;</span>'));const u=document.querySelector("label[for='"+n.id+"']");null!==u&&(null===(s=r.querySelector(".datetimepicker-dummy-input"))||void 0===s||s.setAttribute("aria-label",null!==(a=u.textContent)&&void 0!==a?a:""))}},populateAliases:function(e){const t=e.querySelectorAll(".alias");for(const e of t)switch(e.dataset.alias){case"Map":e.textContent=exports.aliases.map;break;case"Lot":e.textContent=exports.aliases.lot;break;case"lot":e.textContent=exports.aliases.lot.toLowerCase();break;case"Occupancy":e.textContent=exports.aliases.occupancy;break;case"occupancy":e.textContent=exports.aliases.occupancy.toLowerCase();break;case"Occupant":e.textContent=exports.aliases.occupant;break;case"occupant":e.textContent=exports.aliases.occupant.toLowerCase();break;case"ExternalReceiptNumber":e.textContent=exports.aliases.externalReceiptNumber}},escapedAliases:r,getRandomColor:function(e){let t=e;return t.length<2&&(t+="a1"),exports.randomColor({seed:t+t,hue:l[t.codePointAt(t.length-1)%l.length],luminosity:p[t.codePointAt(t.length-2)%p.length]})},setUnsavedChanges:function(){n()||(o=!0,cityssm.enableNavBlocker())},clearUnsavedChanges:function(){o=!1,cityssm.disableNavBlocker()},hasUnsavedChanges:n,getMoveUpDownButtonFieldHTML:function(e,t,s=!0){return`<div class="field has-addons">\n      <div class="control">\n      <button\n          class="button ${s?"is-small":""} ${e}"\n          data-tooltip="Move Up" data-direction="up" type="button" aria-label="Move Up">\n      <i class="fas fa-arrow-up" aria-hidden="true"></i>\n      </button>\n      </div>\n      <div class="control">\n      <button\n          class="button ${s?"is-small":""} ${t}"\n          data-tooltip="Move Down" data-direction="down" type="button" aria-label="Move Down">\n      <i class="fas fa-arrow-down" aria-hidden="true"></i>\n      </button>\n      </div>\n      </div>`},getLoadingParagraphHTML:function(e="Loading..."){return`<p class="has-text-centered has-text-grey">\n      <i class="fas fa-5x fa-circle-notch fa-spin" aria-hidden="true"></i><br />\n      ${cityssm.escapeHTML(e)}\n      </p>`},getSearchResultsPagerHTML:function(e,t,s){return'<div class="level"><div class="level-left"><div class="level-item has-text-weight-bold">Displaying '+(t+1).toString()+" to "+Math.min(s,e+t).toString()+" of "+s.toString()+'</div></div><div class="level-right">'+(t>0?'<div class="level-item">\n              <button class="button is-rounded is-link is-outlined" data-page="previous" type="button" title="Previous">\n                <i class="fas fa-arrow-left" aria-hidden="true"></i>\n              </button>\n              </div>':"")+(e+t<s?'<div class="level-item">\n              <button class="button is-rounded is-link" data-page="next" type="button" title="Next">\n                <span>Next</span>\n                <span class="icon"><i class="fas fa-arrow-right" aria-hidden="true"></i></span>\n              </button>\n              </div>':"")+"</div></div>"},getMapURL:function(e="",t=!1,s=!1){return d("maps",e,t,s)},getLotURL:function(e="",t=!1,s=!1){return d("lots",e,t,s)},getLotOccupancyURL:function(e="",t=!1,s=!1){return d("lotOccupancies",e,t,s)},getWorkOrderURL:function(e="",t=!1,s=!1){return d("workOrders",e,t,s)}};exports.los=m})();